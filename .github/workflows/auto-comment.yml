name: "Auto-Comment on Nomination Issues"
on:
  issues:
    types: [opened]

jobs:
  comment-on-issue:
    runs-on: ubuntu-latest
    steps:
      - name: Add Welcome Comment for Nominations Only
        uses: actions/github-script@v6
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const issue = context.payload.issue;
            const labels = issue.labels.map(label => label.name.toLowerCase());

            // Only proceed if the issue has the "nomination" label
            if (!labels.includes("nomination")) {
              console.log("Skipping: Issue is not a nomination.");
              return;
            }

            let programName = "PyTorch Foundation Programs";
            let programDocs = "https://github.com/pytorch-fdn/foundation-programs";

            if (labels.includes("ambassador")) {
              programName = "PyTorch Ambassador Program";
              programDocs = "https://github.com/pytorch-fdn/foundation-initiative/blob/main/pytorch-ambassador-program.md";
            } else if (labels.includes("ospo-outreach")) {
              programName = "OSPO Outreach Program";
              programDocs = "https://github.com/pytorch-fdn/foundation-initiative/blob/main/osp-outreach.md";
            } else if (labels.includes("speakers-bureau")) {
              programName = "Speakers Bureau Program";
              programDocs = "https://github.com/pytorch-fdn/foundation-initiative/blob/main/speakers-bureau.md";
            }

            const commentBody = `üëã Thank you for submitting a nomination for the **${programName}**! üéâ\n\n
            Your nomination is currently under review. A team member will evaluate the submission and update the status accordingly.\n\n
            üîπ **Review Process & Next Steps:**\n
            1Ô∏è‚É£ **Initial Review** - The nomination will be reviewed by the team.  
            2Ô∏è‚É£ **One-on-One Review** - If shortlisted, the nominee will have a session with the Executive Director.  
            3Ô∏è‚É£ **Ranking & Selection** - Nominees will be ranked based on eligibility & impact.  
            4Ô∏è‚É£ **Final Decision** - Selected ambassadors will receive an **official invitation**. ‚úÖ\n\n
            üìñ **Program Details & Requirements:** [Read More Here](${programDocs})\n\n
            Please stay tuned and feel free to respond here if you have any questions. üöÄ`;

            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issue.number,
              body: commentBody
            });

